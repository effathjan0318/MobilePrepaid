<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recharge</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <style>
        html, body {
            overflow-x: hidden;  
        }
        body {
            background-color: #f8f9fa;
            /* margin: 0; */
            /* padding: 0%; */
        }
        .navbar {
            background-color: #ffffff;
            box-shadow: 0px 0px 10px ;
        }

        .navbar-brand, .navbar-nav .nav-link {
            color: #54388b;
        }

        .navbar-nav .nav-link:hover {
            color: #000000;
        }
    
        .hero-section {
            background: url('../img/h3.png') no-repeat center center/cover;
            color: white;
            text-align: left;
            padding: 80px 30px;
        }
        .hero-section h1 {
            font-size: 3rem;
            font-weight: bold;
        }
        .hero-section .btn {
            background-color: #54388b;
            border-color: #54388b;
            /* border: none; */
        }
        .hero-section .btn:hover {
            /* background-color: #6e4eaf; */
            border-color: #feffff;
            box-shadow: 0px 0px 5px #feffff;
        }

        .footer {
            background-color: #54388b;
            color: white;
            padding: 30px 0;
            font-size: 14px;
        }

        .footer h5 {
            color: #f4f7fc;
            font-size: 23px;
            margin-bottom: 15px;
        }

        .footer hr {
            border: 1px solid #ffffff;
            width: 50px;
            margin-bottom: 15px;
        }

        .footer a {
            color: #feffff;
            text-decoration: none;
            transition: 0.3s;
        }

        .footer a:hover {
            color: #ffffff;
            text-decoration: underline;
        }

        .social-icons a {
            color: white;
            font-size: 20px;
            transition: 0.3s;
        }

        .social-icons a:hover {
            color: #00acee;
        }
        .plan {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
        }
        
        .filter-btn {
            display: block;
            margin-top: 10px;
            width: 100px;
            padding: 10px;
            /* border: none; */
            /* background: #54388b; */
            color: rgb(20, 20, 20);
            /* background: #3a2468; */
            color: rgb(0, 0, 0);
            border-radius: 20px;
            cursor: pointer;
            border-color: #54388b;
        }
        .filter-btn:hover {
            background-color: #4e3b75;
            color: #ffffff;
            
        }
        .plan button{
            background-color: #54388b;
            border: none;
        }
        .plan button:hover{
            background-color: #352457;
        }
        .nav .nav-item a{
            color: #352457;
        }
        .plan a{
            text-decoration: none;
            color:#352457 ;
            display: flex;
            justify-content: flex-end;
        }
        .plan a:hover{
            text-decoration: underline;
        }
        .row button{
            background-color: #54388b;
            border: none;
        }
        .row button:hover{
            background-color: #352457;
        }
        .modal .btn{
            background-color: #54388b;
            border: none;
        }
        .modal .btn:hover{
            background-color: #352457;
        }
        .recharge-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            margin: 20px auto;
            max-width: 500px;  /* Limits max width but keeps it responsive */
            width: 100%; /* Ensures it adapts to smaller screens */
        }
        .recharge-section button {
            background: #54388b;
            border: none;
        }
        .recharge-section button:hover {
            background: #352457;
        }
        @keyframes fadeSlideUp {
        from {
            opacity: 0;
            transform: translateY(50px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
        }

        .hero-section h1 {
            animation: fadeSlideUp 1s ease-out forwards;
        }

        .hero-section p {
            animation: fadeSlideUp 1s ease-out 0.5s forwards;
            opacity: 0;
        }

        .hero-section .btn {
            animation: fadeSlideUp 1s ease-out 1s forwards;
            opacity: 0;
        }

        

       
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light sticky-top">
        <div class="container">
            <a class="navbar-brand" href="./Home.html">
                <img src="../img/logo.png" alt="Logo" width="150"> 
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="./Home.html"><i class="bi bi-house-door"></i> Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./Recharge.html"><i class="bi bi-lightning-fill"></i> Recharge</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./getSIM.html"><i class="bi bi-sim"></i> Get SIM</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./customerSupport.html"><i class="bi bi-headset"></i> Support</a>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-person-circle"></i> <span id="loggedInUser">Account</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                            <li><a class="dropdown-item" href="./Mobile.html"><i class="bi bi-gear"></i> Profile</a></li>
                            <li><a class="dropdown-item" href="#" style="color: red;" onclick="logoutUser()"><i class="bi bi-box-arrow-right"></i> Logout</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <!-- Hero Section -->
    <section class="hero-section text-center text-lg-start">
        <h1>One-time recharge for <br> 1 full year</h1>
        <p>Recharge with a ₹3499 for a year full of digital delights</p>
        <a href="#annual" class="btn btn-primary btn-lg">Get the best Annual Plan</a>
    </section>

    <!--Recharge number-->
    <section class="container text-center my-4">
        <div class="recharge-section mx-auto p-3 p-md-4">
            <h2>Recharge Mobile</h2>
            
            <div id="phoneInputSection">
                <input type="text" id="phoneNo" class="form-control mb-2" placeholder="Enter Mobile Number">
                <p id="errorMessage" class="text-danger mt-2"></p>
                <button class="btn btn-primary w-100" onclick="validateAndCheckUser()">Recharge Now</button>
            </div>
    
            <div id="changeNumberSection" class="d-none">
                <p class="fw-bold">Mobile Number: <span id="displayPhone" class="text-primary fs-4 fw-bold"></span></p>
                <button class="btn btn-secondary" onclick="changeNumber()">Change Number</button>
            </div>
        </div>
    </section>
    
    <!-- Bootstrap Toast Message -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
        <div id="planToast" class="toast align-items-center text-white bg-success border-0" role="alert">
            <div class="d-flex">
                <div class="toast-body">
                    Number verified! Please select a plan.
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
            </div>
        </div>
    </div>
    
    
    
    


    <!-- Most Loved Section -->
    <section class="container-wide popular-plans text-center my-4">
        <h2>Most Loved Plans</h2>
        <div id="LovedPlans" class="row">
            <div class="col-12 col-md-6 col-lg-4">
                <div class="card p-3">
                    <h2>₹299</h2>
                    <br>
                    <div class="pack-details">
                        <p><b>Validity:</b> 30 Days</p>
                        <p><b>Data:</b> 1.5GB/day</p>
                    </div>
                    <button class="btn btn-primary" onclick="redirectToPayment()">Recharge</button>
                </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
                <div class="card p-3">
                    <h2>₹499</h2>
                    <br>
                    <div class="pack-details">
                        <p><b>Validity:</b> 56 Days</p>
                        <p><b>Data:</b> 2GB/day</p>
                    </div>
                    <button class="btn btn-primary" onclick="redirectToPayment()">Recharge</button>
                </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
                <div class="card p-3">
                    <h2>₹799</h2>
                    <br>
                    <div class="pack-details">
                        <p><b>Validity:</b> 84 Days</p>
                        <p><b>Data:</b> 2.5GB/day</p>
                    </div>
                    <button class="btn btn-primary" onclick="redirectToPayment()">Recharge</button>
                </div>
            </div>
            
        </div>
    </section>
    <hr>
    <!-- filter and Plans Section -->
    <div class="container my-5 row" >
        <div class="left col-12 col-md-3 mt-5">
            <h4>Filters</h4>
            <label for="priceRange" class="form-label">Price Range:</label>
            <input type="range" class="form-range" id="priceRange" min="10" max="1000" step="5" onchange="filterPlans()">
            <span id="priceValue">₹10 - ₹7499</span><br>
            
            <label for="networkType" class="form-label mt-3">Network Type:</label>
            <select class="form-select" id="networkType" onchange="filterPlans()">
                <option value="all">All</option>
                <option value="4G">4G</option>
                <option value="5G">5G</option>
            </select>
            
            <label for="talktime" class="form-label mt-3">Talktime:</label>
            <select class="form-select" id="talktime" onchange="filterPlans()">
                <option value="all">All</option>
                <option value="yes">With Talktime</option>
                <option value="no">Without Talktime</option>
            </select>

            <label for="dataPlan" class="form-label mt-3">Data Plan:</label>
            <select class="form-select" id="dataPlan" onchange="filterPlans()">
                <option value="all">All</option>
                <option value="2GB/day">2GB/day</option>
                <option value="1GB/day">1GB/day</option>
                <option value="3GB/day">3GB/day</option>
                <option value="unlimited">Unlimited</option>
            </select>

        </div>

        <div class="right col-12 col-md-9">
            <h2 class="text-center mb-4">Choose Your Best Plan</h2>
            <!-- Navigation Tabs -->
             <ul class="nav nav-tabs" id="planTabs">
                <!-- <li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#all">All Plans</a></li>
                <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#popular">Popular</a></li>
                <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#unlimited">Truly Unlimited</a></li>
                <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#data">Data Add-on</a></li>
                <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#topup">Top-up</a></li>
                <li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#annual">Annual Plans</a></li> -->
            </ul> 
            

            <div class="tab-content mt-3" id="plansContainer"></div>

            <div id="paginationControls" class="mt-4"></div>

        </div>
    </div>

    <!-- footer section -->
    <div class="footer">
        <div class="container">
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4">
    
             
                <div class="col-md-3">
                    <h5>About Prepaid Plus</h5>
                    <hr>
                    <p>Welcome to Prepaid Plus, your one-stop solution for seamless mobile recharges and prepaid management. We provide fast, secure, and hassle-free recharge services with a user-friendly experience.</p>
                </div>
                
                <div class="col-md-3">
                    <h5>Our Offerings</h5>
                    <hr>
                    <ul class="list-unstyled">
                        <li><a href="./Recharge.html">Prepaid</a></li>
                        <li><a href="./getSIM.html">Get New SIM</a></li>
                        <li><a href="./Mobile.html">Set AutoPay</a></li>
                    </ul>
                </div>
    
              
                <div class="col-md-3">
                    <h5>Support</h5>
                    <hr>
                    <ul class="list-unstyled">
                        <li><a href="./Mobile.html">My Account</a></li>
                        <li><a href="./FAQ.html">FAQ</a></li>
                        <li><a href="./customerSupport.html">Lost SIM</a></li>
                        <li><a href="./customerSupport.html">Feedback</a></li>
                    </ul>
                </div>
    
                <div class="col-md-3">
                    <h5>Connect with Us</h5>
                    <hr>
                    <p><i class="bi bi-geo-alt-fill"></i> Tamil Nadu, India</p>
                    <p><i class="bi bi-envelope-fill"></i> prepaidplus@info.com</p>
                    <p><i class="bi bi-telephone-fill"></i> +91 77068 55467</p>
    
            
                    <div class="social-icons mt-3">
                        <a href="#" class="me-3"><i class="bi bi-facebook"></i></a>
                        <a href="#" class="me-3"><i class="bi bi-twitter"></i></a>
                        <a href="#" class="me-3"><i class="bi bi-instagram"></i></a>
                        <a href="#"><i class="bi bi-linkedin"></i></a>
                    </div>
                </div>
    
            </div>
    
        </div>
    </div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    
    <script>

// async function displayLoggedInUser() {
//         try {
//             let phoneNo = localStorage.getItem("phoneNo");
//             if (!phoneNo) return;

//             document.getElementById("phoneNo").value = phoneNo;

//             let response = await fetch("http://localhost:8083/api/users");
//             if (!response.ok) {
//                 throw new Error("Failed to fetch user data");
//             }
//             let users = await response.json();

//             let user = users.find(user => user.phoneNumber === phoneNo);
//             if (user) {
//                 document.getElementById("loggedInUser").textContent = user.fullName;
//             }
//         } catch (error) {
//             console.error("Error fetching logged-in user:", error);
//         }
//     }

//     window.onload = displayLoggedInUser;

//     displayLoggedInUser();


document.addEventListener("DOMContentLoaded", function () {
    // Retrieve user and plan data from session storage
    let userData = sessionStorage.getItem("user");

    if (userData) {
        let user = JSON.parse(userData);
        document.getElementById("loggedInUser").textContent = user.fullName;
        document.getElementById("phoneNo").value = user.phoneNumber;
    }
});
    function redirectToPayment(){
        window.location.href = "payment.html"; 
    }

    async function validateAndCheckUser() {
    let phoneInput = document.getElementById("phoneNo");
    let phone = phoneInput.value.trim();
    let errorMessage = document.getElementById("errorMessage");

    let phoneRegex = /^[6-9]\d{9}$/;
    if (!phoneRegex.test(phone)) {
        errorMessage.textContent = "Invalid phone number! Enter a valid 10-digit number.";
        return;
    }

    try {
        let response = await fetch(`http://localhost:8083/api/users/phone/${phone}`);
        if (!response.ok) throw new Error("Phone number not registered!");

        let user = await response.json();

        errorMessage.textContent = ""; 
        localStorage.setItem("phoneNo", phone);
        sessionStorage.setItem("rechargeUser", JSON.stringify(user));

        // Hide input field and show "Change Number" section
        document.getElementById("phoneInputSection").classList.add("d-none");
        document.getElementById("changeNumberSection").classList.remove("d-none");
        document.getElementById("displayPhone").textContent = phone;

        // Show Toast Notification
        showPlanToast();

        // Redirect to the loved plans section
        window.location.href = "#LovedPlans";

    } catch (error) {
        errorMessage.textContent = error.message;
    }
}

function changeNumber() {
    // Clear stored phone number and reset UI
    localStorage.removeItem("phoneNo");
    document.getElementById("phoneNo").value = "";
    document.getElementById("errorMessage").textContent = "";

    document.getElementById("phoneInputSection").classList.remove("d-none");
    document.getElementById("changeNumberSection").classList.add("d-none");
}

// Function to show toast notification
function showPlanToast() {
    let toastElement = document.getElementById("planToast");
    let toast = new bootstrap.Toast(toastElement);
    toast.show();
}


document.addEventListener("DOMContentLoaded", async function () {
    try {
        await fetchCategories();
        await fetchPlans();
    } catch (error) {
        console.error("Error initializing data:", error);
    }

    document.querySelectorAll(".nav-link").forEach(tab => {
        tab.addEventListener("click", function () {
        let selectedCategory = this.getAttribute("data-category") || "all";
        fetchPlans(selectedCategory);
    });
    });
});


let allPlans = [];
let allCategories = [];


async function fetchCategories() {
    try {
        let response = await fetch("http://localhost:8083/api/categories");
        if (!response.ok) throw new Error("Failed to fetch categories");

        allCategories = await response.json();
        updateCategoryTabs(allCategories);
    } catch (error) {
        console.error("Error fetching categories:", error);
    }
}


function updateCategoryTabs(categories) {
    let tabContainer = document.getElementById("planTabs");
    tabContainer.innerHTML = `<li class="nav-item">
        <a class="nav-link active" data-bs-toggle="tab" href="#all">All Plans</a>
    </li>`;

    categories.forEach(category => {
        console.log(category);
        let categoryName = category.categoryName 
        console.log(categoryName);
        tabContainer.innerHTML += `
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#${categoryName}" data-category="${categoryName}">${category.categoryName}</a>
            </li>
        `;
    });
}

async function fetchPlans(category = "all") {
    try {
        let url = category === "all"
            ? "http://localhost:8083/api/plans"
            : `http://localhost:8083/api/plans/category/${encodeURIComponent(category)}`;

        console.log("Fetching from:", url); 

        let response = await fetch(url);
        let data = await response.json();

        console.log("API Response:", data); 

        if (!response.ok || !Array.isArray(data)) throw new Error("Failed to fetch plans");

        allPlans = data; 
        displayPlans(data);
    } catch (error) {
        console.error("Error fetching plans:", error);
    }
}

let currentPage = 1;
const plansPerPage = 5;

function displayPlans(plans, page = 1) {
    let container = document.getElementById("plansContainer");
    container.innerHTML = "";

    if (plans.length === 0) {
        container.innerHTML = "<p class='text-center'>No plans available.</p>";
        return;
    }

    // Pagination logic: Get plans for the current page
    let start = (page - 1) * plansPerPage;
    let end = start + plansPerPage;
    let paginatedPlans = plans.slice(start, end);

    paginatedPlans.forEach(plan => {
        let planHTML = `
            <div class="plan card p-3 mb-3">
                <h3>₹${plan.price}</h3>
                <div class="d-flex flex-row gap-5">
                    <p><b>Validity:</b> ${plan.validity}</p>
                    <p><b>Data:</b> ${plan.data}</p>
                    <p><b>Calls:</b> ${plan.voice}</p>
                </div>
                <div class="d-flex justify-content-end">
                    <button class="btn btn-primary" onclick="viewPlanDetails(${plan.planId})">View Details</button>
                </div>
            </div>
        `;
        container.innerHTML += planHTML;
    });

    updatePaginationControls(plans.length, page);
}

function updatePaginationControls(totalPlans, page) {
    let totalPages = Math.ceil(totalPlans / plansPerPage);
    let paginationContainer = document.getElementById("paginationControls");

    paginationContainer.innerHTML = `
        <nav>
            <ul class="pagination justify-content-center">
                <li class="page-item ${page === 1 ? 'disabled' : ''}">
                    <a class="page-link" href="#" onclick="changePage(${page - 1}, event)">Previous</a>
                </li>
                ${Array.from({ length: totalPages }, (_, i) => `
                    <li class="page-item ${i + 1 === page ? 'active' : ''}">
                        <a class="page-link" href="#" onclick="changePage(${i + 1}, event)">${i + 1}</a>
                    </li>
                `).join('')}
                <li class="page-item ${page === totalPages ? 'disabled' : ''}">
                    <a class="page-link" href="#" onclick="changePage(${page + 1}, event)">Next</a>
                </li>
            </ul>
        </nav>
    `;
}


function changePage(newPage, event) {
    event.preventDefault(); // Prevent default anchor link behavior

    currentPage = newPage;
    displayPlans(allPlans, currentPage);

    // Smooth scroll to the navigation tabs
    let navTabs = document.getElementById("planTabs");
    if (navTabs) {
        navTabs.scrollIntoView({ behavior: "smooth", block: "start" });
    }
}

// Fetch plans initially
fetchPlans();




function viewPlanDetails(planId) {
    let plan = allPlans.find(p => p.planId === planId);
    if (!plan) {
        console.error("Plan not found:", planId);
        return;
    }

    
    let existingModal = document.getElementById("planModal");
    if (existingModal) {
        existingModal.remove();
    }

    let modalHTML = `
        <div class="modal fade" id="planModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Plan Details - ₹${plan.price}</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <p><b>Validity:</b> ${plan.validity}</p>
                        <p><b>Data:</b> ${plan.data}</p>
                        <p><b>Calls:</b> ${plan.voice}</p>
                        <p><b>Network:</b> ${plan.network.toUpperCase()}</p>
                        <p><b>Talktime:</b> ${plan.talktime === "yes" ? "Included" : "Not Included"}</p>
                    </div>
                    <div class="modal-footer">
                        <a href="./payment.html?amount=${plan.price}">
                            <button class="btn btn-success">Proceed to Recharge</button>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    `;

    
    document.body.insertAdjacentHTML("beforeend", modalHTML);

   
    let planModal = new bootstrap.Modal(document.getElementById("planModal"));
    planModal.show();
    sessionStorage.setItem("plan", JSON.stringify(plan));

    document.getElementById("planModal").addEventListener("hidden.bs.modal", function () {
        document.getElementById("planModal").remove();
    });
}


async function filterPlans() {
    let maxPrice = document.getElementById("priceRange").value;
    document.getElementById("priceValue").textContent = `₹10 - ₹${maxPrice}`;
    let selectedNetwork = document.getElementById("networkType").value;
    let selectedTalktime = document.getElementById("talktime").value;
    let selectedData = document.getElementById("dataPlan").value; 
    let queryParams = new URLSearchParams({
        maxPrice: maxPrice,
        network: selectedNetwork !== "all" ? selectedNetwork : "",
        talktime: selectedTalktime !== "all" ? selectedTalktime : "",
        data: selectedData !== "all" ? selectedData : ""
    });

    try {
        let response = await fetch(`http://localhost:8083/api/plans/filter?${queryParams}`);
        let filteredPlans = await response.json();
        updateActiveTab(filteredPlans);
    } catch (error) {
        console.error("Error fetching filtered plans:", error);
    }
}


    function updateActiveTab(filteredPlans = allPlans) {
        let activeTab = document.querySelector('.nav-link.active').getAttribute('href').substring(1);
        let categoryPlans = activeTab === "all" ? filteredPlans : filteredPlans.filter(plan => plan.category === activeTab);
        displayPlans(categoryPlans);
    }


    async function fetchMostLovedPlans() {
    try {
        let response = await fetch("http://localhost:8083/api/plans/category/popular");
        if (!response.ok) throw new Error("Failed to fetch plans");
        
        let plans = await response.json();
        
        // Sort plans by popularity (assuming 'popularity' field exists)
        plans.sort((a, b) => b.popularity - a.popularity);
        
        // Get the top 3 plans
        let mostLovedPlans = plans.slice(1, 4);
        
        displayMostLovedPlans(mostLovedPlans);
    } catch (error) {
        console.error("Error fetching most loved plans:", error);
    }
}

function displayMostLovedPlans(plans) {
    let container = document.getElementById("LovedPlans");
    container.innerHTML = ""; 
    
    plans.forEach(plan => {
        let planHTML = `
            <div class="col-12 col-md-6 col-lg-4">
                <div class="card p-3">
                    <h2>₹${plan.price}</h2>
                    <br>
                    <div class="pack-details">
                        <p><b>Validity:</b> ${plan.validity}</p>
                        <p><b>Data:</b> ${plan.data}</p>
                    </div>
                    <button class="btn btn-primary" onclick="viewPlanDetails(${plan.planId})">View Details</button>
                </div>
            </div>
        `;
        container.innerHTML += planHTML;
    });
}

function redirectToPayment(amount) {
    window.location.href = `payment.html?amount=${amount}`;
}

// Fetch the most loved plans when the page loads
document.addEventListener("DOMContentLoaded", fetchMostLovedPlans);

function logoutUser() {
        sessionStorage.clear();
        window.location.href = "userLogin.html"; 
    }


    </script>
</body>
</html>
